import pandas as pd
import matplotlib.pyplot as plt

# Read the CSV file
df = pd.read_csv("data/prices_round_1_day_-2.csv", sep=';')

# Convert 'timestamp' to numeric if not already
df['timestamp'] = pd.to_numeric(df['timestamp'], errors='coerce')

# Group by product
products = df['product'].unique()

# Plot mid prices for each product
plt.figure(figsize=(12, 6))

for product in products:
    product_df = df[df['product'] == product]
    plt.plot(product_df['timestamp'], product_df['mid_price'], label=product)

plt.title('Mid Prices Over Time for Each Product')
plt.xlabel('Timestamp')
plt.ylabel('Mid Price')
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()

# Calculate and display standard deviation of mid prices for each product
print("Standard Deviations of Mid Prices by Product:")
for product in products:
    product_df = df[df['product'] == product]
    std_dev = product_df['mid_price'].std()
    print(f"{product}: {std_dev:.2f}")
